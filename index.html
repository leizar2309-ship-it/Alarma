<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Alarma Pro</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
</head>
<body style="font-family:sans-serif; text-align:center; background:#f0f2f5;">

    <div style="background:white; padding:20px; border-radius:15px; display:inline-block; margin-top:50px; box-shadow:0 5px 15px rgba(0,0,0,0.1);">
        <h2>‚è∞ Mi Alarma Cloud</h2>
        <input type="text" id="tarea" placeholder="¬øQu√© recordar?" style="padding:10px; width:80%;"><br><br>
        <input type="datetime-local" id="fecha" style="padding:10px; width:80%;"><br><br>
        <button onclick="guardar()" style="padding:10px 20px; background:#1a73e8; color:white; border:none; border-radius:5px; cursor:pointer;">üíæ GUARDAR ALARMA</button>
    </div>

    <div id="lista" style="margin-top:20px;"></div>

    <script>
        // TU CONFIGURACI√ìN REAL
        const firebaseConfig = {
            apiKey: "AIzaSyDhv7MyudfyxIUf2OXuy4Gnn8mdNFW_xIU",
            authDomain: "mialarmapro.firebaseapp.com",
            databaseURL: "https://mialarmapro-default-rtdb.firebaseio.com",
            projectId: "mialarmapro",
            storageBucket: "mialarmapro.firebasestorage.app",
            messagingSenderId: "978466433092",
            appId: "1:978466433092:web:11903d2bf289294a7c3411"
        };

        // Inicializar
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        function guardar() {
            const t = document.getElementById('tarea').value;
            const f = document.getElementById('fecha').value;

            if(!t || !f) return alert("Escribe algo y pon fecha");

            // Esto es lo que escribe en Firebase
            db.ref('alarmas').push({
                texto: t,
                tiempo: new Date(f).getTime(),
                avisado: false
            })
            .then(() => {
                alert("‚úÖ ¬°ENVIADO A FIREBASE!");
                document.getElementById('tarea').value = "";
            })
            .catch((error) => {
                alert("‚ùå ERROR: " + error.message);
            });
        }

        // Mostrar lo que hay en la base de datos
        db.ref('alarmas').on('value', (snapshot) => {
            const data = snapshot.val();
            const listaDiv = document.getElementById('lista');
            listaDiv.innerHTML = "<h3>Tareas en la Nube:</h3>";
            for(let id in data) {
                listaDiv.innerHTML += `<p>${data[id].texto} - ${new Date(data[id].tiempo).toLocaleString()}</p>`;
            }
        });
    </script>
</body>
</html>
